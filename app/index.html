<!DOCTYPE html>
<html>
<head>
  <title>MetaCoin - Default Truffle App</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href="./app.css" rel='stylesheet' type='text/css'>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script> 
  <script src="./app.js"></script>
</head>
<body>
  <h1>MetaCoin</h1>
  <h2>Example Truffle Dapp</h2>
  <h3>You have <span class="black"><span id="balance"></span> META</span></h3>

  <br>
  <h1>Send</h1>
  <br><label for="amount">Amount:</label><input type="text" id="amount" placeholder="e.g., 95"></input>
  <br><label for="receiver">To Address:</label><input type="text" id="receiver" placeholder="e.g., 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae"></input>
  <br><br><button id="send" onclick="sendCoin()">Send MetaCoin</button>
  <br><br>
  <span id="status"></span>


  <div>
    <button id="switch">Turn On</button>
    <p id="state">Test</p>
    <ul id="allAccounts">
    </ul>
  </div>
  <script type="text/javascript">
    var device = Device.deployed();
    var myEvent = device.PowerOn();
    myEvent.watch(function(err, data) {
      if (!err) {
        console.log("WORKING");
      }
    });

    $('#switch').unbind().click(function() {
      console.log("testing button");
      var device = Device.deployed();
      device.powerSwitch({from: account}).then(function() {
        console.log("Success");
      }).catch(function(e) {
        console.log(e);
      });
    });


    function post(path, params, method) {
      method = method || "post";
      var form = document.createElement("form");
      form.setAttribute("method", method);
      form.setAttribute("action", path);

      for(var key in params) {
          if(params.hasOwnProperty(key)) {
              var hiddenField = document.createElement("input");
              hiddenField.setAttribute("type", "hidden");
              hiddenField.setAttribute("name", key);
              hiddenField.setAttribute("value", params[key]);
              form.appendChild(hiddenField);
           }
      }
      document.body.appendChild(form);
      form.submit();
    }
  </script>
</body>
</html>
